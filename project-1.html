<!DOCTYPE html>
<html>
  <head>
    <title>N Robots Problem</title>
    <h1 style="color:#02FF02">N Robots Problem</h1>
    <p style="text-align:justify; max-width:580px;">
      The problem involves N robots on an m by n grid, an initial state specifying the initial position of the robots
      and a goal state specifying the final position of the robots. Using various searching algorithms, 
      the optimal path from the initial to goal state will be found without any robot exiting the grid, colliding or swapping places.
    </p>
  </head>
  <body style="background-color:#002240; color:white;">
    <h1 style="color:#02FF02">Problem</h1>
    <p style="text-align:justify; max-width:580px;">
      Formalizing the problem
    </p>
    <div style="width:610px; height:300px; overflow:auto; font-family:courier"> 
 <table class="table"><tr><td><div class="linenodiv" style="background-color: #454545; padding-right: 10px"><pre style="line-height: 125%"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88</pre></div></td><td class="code"><div style="background: #002240"><pre style="line-height: 125%"><span></span><span style="color: #FF8000">class</span> <span style="color: #5E5EFF">Problem</span> :
    <span style="color: #02FF02">&#39;&#39;&#39;</span>
<span style="color: #02FF02">    +------------------------------------------------------------+</span>
<span style="color: #02FF02">    |                 N Robots on an m x n Grid                  |</span>
<span style="color: #02FF02">    +------------+-----------------------------------------------+</span>
<span style="color: #02FF02">    | Substate j | Position of Robot j: ( jx, jy )               |</span>
<span style="color: #02FF02">    +------------+-----------------------------------------------+</span>
<span style="color: #02FF02">    | State N    | ( Substate 1, Substate 2, ..., Substate N )   |</span>
<span style="color: #02FF02">    +------------+-----------------------------------------------+</span>
<span style="color: #02FF02">    | Conditions | (1) Robots cannot move outside grid:          |</span>
<span style="color: #02FF02">    |            |     (a) 1 &lt;= jx &lt;= m;                         |</span>
<span style="color: #02FF02">    |            |     (b) 1 &lt;= jy &lt;= n.                         |</span>
<span style="color: #02FF02">    |            | (2) Robots cannot share position:             |</span>
<span style="color: #02FF02">    |            |     Count( Substate j ) = 1.                  |</span>
<span style="color: #02FF02">    +------------+-----------------------------------------------+</span>
<span style="color: #02FF02">    | Actions j  | { Substate 1f, Substate 2f, ... }             |</span>
<span style="color: #02FF02">    +------------+-----------------------------------------------+</span>
<span style="color: #02FF02">    | Successor  | { State 1f, State 2f, ... }                   |</span>
<span style="color: #02FF02">    +------------+-----------------------------------------------+</span>
<span style="color: #02FF02">    | Conditions | (1) Robots move by one grid unit:             |</span>
<span style="color: #02FF02">    |            |     (a) xi - 1 &lt;= xf &lt;= xi + 1;               |</span>
<span style="color: #02FF02">    |            |     (b) yi - 1 &lt;= yf &lt;= yi + 1.               |</span>
<span style="color: #02FF02">    |            | (2) Robots should not collide:                |</span>
<span style="color: #02FF02">    |            |     Count( Substate jf ) = 1.                 |</span>
<span style="color: #02FF02">    |            | (3) Robots cannot swap places:                |</span>
<span style="color: #02FF02">    |            |     (a) ( Substate ji, Substate jf )          |</span>
<span style="color: #02FF02">    |            |         != ( Substate kf, Substate ki );      |</span>
<span style="color: #02FF02">    |            |     (b) ( Substate ji, Substate ki )          |</span>
<span style="color: #02FF02">    |            |         != ( Substate kf, Substate jf );      |</span>
<span style="color: #02FF02">    |            |     (c) j &lt; k.                                |</span>
<span style="color: #02FF02">    +------------+-----------------------------------------------+</span>
<span style="color: #02FF02">    &#39;&#39;&#39;</span>
    <span style="color: #FF8000">def</span> <span style="color: #5E5EFF">__init__</span>( <span style="color: #FF69B4">self</span> ) :
        <span style="color: #FF69B4">self</span><span style="color: #FF8000">.</span><span style="color: #FFFFFF">grid_x</span> <span style="color: #FF8000">=</span> <span style="color: #FF00FF">1</span>
        <span style="color: #FF69B4">self</span><span style="color: #FF8000">.</span><span style="color: #FFFFFF">grid_y</span> <span style="color: #FF8000">=</span> <span style="color: #FF00FF">1</span>
        <span style="color: #FF69B4">self</span><span style="color: #FF8000">.</span><span style="color: #FFFFFF">init</span> <span style="color: #FF8000">=</span>   [ ( <span style="color: #FF00FF">1</span>, <span style="color: #FF00FF">1</span> ) ]
        <span style="color: #FF69B4">self</span><span style="color: #FF8000">.</span><span style="color: #FFFFFF">goal</span> <span style="color: #FF8000">=</span>   [ ( <span style="color: #FF00FF">1</span>, <span style="color: #FF00FF">1</span> ) ]
        <span style="color: #FF69B4">self</span><span style="color: #FF8000">.</span><span style="color: #FFFFFF">robots</span> <span style="color: #FF8000">=</span> <span style="color: #FF69B4">len</span>( <span style="color: #FF69B4">self</span><span style="color: #FF8000">.</span><span style="color: #FFFFFF">init</span> )
    
    <span style="color: #FF8000">def</span> <span style="color: #5E5EFF">successor</span>( <span style="color: #FF69B4">self</span>, <span style="color: #FFFFFF">state</span> ) :
        <span style="color: #02FF02">&#39;&#39;&#39; </span>
<span style="color: #02FF02">        Generates set of reachable states</span>
<span style="color: #02FF02">        by an action from given a state. </span>
<span style="color: #02FF02">        &#39;&#39;&#39;</span>
        <span style="color: #FFFFFF">swap</span> <span style="color: #FF8000">=</span> <span style="color: #FF69B4">set</span>() <span style="color: #DD0000"># { ( Substate ji, Substate ki ), ... };</span>
                     <span style="color: #DD0000"># j &lt; k.</span>
        <span style="color: #FF8000">for</span> <span style="color: #FFFFFF">j</span> <span style="color: #FF8000">in</span> <span style="color: #FF69B4">range</span>( <span style="color: #FF69B4">self</span><span style="color: #FF8000">.</span><span style="color: #FFFFFF">robots</span> ) :
            <span style="color: #FFFFFF">sub_ji</span> <span style="color: #FF8000">=</span> <span style="color: #FFFFFF">state</span>[ <span style="color: #FFFFFF">j</span> ]
            <span style="color: #FF8000">for</span> <span style="color: #FFFFFF">sub_ki</span> <span style="color: #FF8000">in</span> <span style="color: #FFFFFF">state</span>[ <span style="color: #FFFFFF">j</span> <span style="color: #FF8000">+</span> <span style="color: #FF00FF">1</span> : ] :
                <span style="color: #FFFFFF">swap</span><span style="color: #FF8000">.</span><span style="color: #FFFFFF">add</span>( ( <span style="color: #FFFFFF">sub_ji</span>, <span style="color: #FFFFFF">sub_ki</span> ) )
        <span style="color: #FFFFFF">acts</span> <span style="color: #FF8000">=</span> [] <span style="color: #DD0000"># Actions available to each</span>
                  <span style="color: #DD0000"># robot j, indexed by robot</span>
        <span style="color: #DD0000"># Generating actions for each robot j</span>
        <span style="color: #FF8000">for</span> <span style="color: #FFFFFF">sub</span> <span style="color: #FF8000">in</span> <span style="color: #FFFFFF">state</span> :
            <span style="color: #FFFFFF">acts_j</span> <span style="color: #FF8000">=</span> <span style="color: #FF69B4">set</span>()
            <span style="color: #FF8000">for</span> <span style="color: #FFFFFF">act</span> <span style="color: #FF8000">in</span> [ <span style="color: #FF00FF">0</span>, <span style="color: #FF00FF">1</span> , <span style="color: #FF8000">-</span><span style="color: #FF00FF">1</span> ] :
                <span style="color: #FFFFFF">xi</span>, <span style="color: #FFFFFF">yi</span> <span style="color: #FF8000">=</span> <span style="color: #FFFFFF">sub</span>[ <span style="color: #FF00FF">0</span> ], <span style="color: #FFFFFF">sub</span>[ <span style="color: #FF00FF">1</span> ]
                <span style="color: #FFFFFF">xf</span>, <span style="color: #FFFFFF">yf</span> <span style="color: #FF8000">=</span> <span style="color: #FFFFFF">sub</span>[ <span style="color: #FF00FF">0</span> ] <span style="color: #FF8000">+</span> <span style="color: #FFFFFF">act</span>, <span style="color: #FFFFFF">sub</span>[ <span style="color: #FF00FF">1</span> ] <span style="color: #FF8000">+</span> <span style="color: #FFFFFF">act</span>
                <span style="color: #DD0000"># (1) Robot cannot move outside grid</span>
                <span style="color: #FF8000">if</span> <span style="color: #FF00FF">1</span> <span style="color: #FF8000">&lt;=</span> <span style="color: #FFFFFF">xf</span> <span style="color: #FF8000">&lt;=</span> <span style="color: #FF00FF">10</span> : <span style="color: #FFFFFF">acts_j</span><span style="color: #FF8000">.</span><span style="color: #FFFFFF">add</span>( ( <span style="color: #FFFFFF">xf</span>, <span style="color: #FFFFFF">yi</span> ) )
                <span style="color: #FF8000">if</span> <span style="color: #FF00FF">1</span> <span style="color: #FF8000">&lt;=</span> <span style="color: #FFFFFF">yf</span> <span style="color: #FF8000">&lt;=</span> <span style="color: #FF00FF">10</span> : <span style="color: #FFFFFF">acts_j</span><span style="color: #FF8000">.</span><span style="color: #FFFFFF">add</span>( ( <span style="color: #FFFFFF">xi</span>, <span style="color: #FFFFFF">yf</span> ) )
            <span style="color: #FFFFFF">acts</span><span style="color: #FF8000">.</span><span style="color: #FFFFFF">append</span>( <span style="color: #FFFFFF">acts_j</span> )
        <span style="color: #FFFFFF">succ</span> <span style="color: #FF8000">=</span> []
        <span style="color: #FF8000">def</span> <span style="color: #5E5EFF">combine</span>( <span style="color: #FFFFFF">acts</span>, <span style="color: #FFFFFF">j</span> <span style="color: #FF8000">=</span> <span style="color: #FF00FF">0</span>, <span style="color: #FFFFFF">state_jf</span> <span style="color: #FF8000">=</span> [] ) :
            <span style="color: #02FF02">&#39;&#39;&#39; </span>
<span style="color: #02FF02">            Generates N nested for loops to</span>
<span style="color: #02FF02">            combine all available actions</span>
<span style="color: #02FF02">            &#39;&#39;&#39;</span>
            <span style="color: #FF8000">if</span> <span style="color: #FFFFFF">j</span> <span style="color: #FF8000">==</span> <span style="color: #FF69B4">self</span><span style="color: #FF8000">.</span><span style="color: #FFFFFF">robots</span> :
                <span style="color: #DD0000"># (3) Robots cannot swap places</span>
                <span style="color: #FF8000">for</span> <span style="color: #FFFFFF">j</span> <span style="color: #FF8000">in</span> <span style="color: #FF69B4">range</span>( <span style="color: #FF69B4">self</span><span style="color: #FF8000">.</span><span style="color: #FFFFFF">robots</span> ) :
                    <span style="color: #FFFFFF">sub_jf</span> <span style="color: #FF8000">=</span> <span style="color: #FFFFFF">state_jf</span>[ <span style="color: #FFFFFF">j</span> ]
                    <span style="color: #FF8000">for</span> <span style="color: #FFFFFF">sub_kf</span> <span style="color: #FF8000">in</span> <span style="color: #FFFFFF">state_jf</span>[ <span style="color: #FFFFFF">j</span> <span style="color: #FF8000">+</span> <span style="color: #FF00FF">1</span> : ] :
                        <span style="color: #DD0000"># ( Substate ji, Substate ki ) </span>
                        <span style="color: #DD0000"># != ( Substate kf, Substate jf )</span>
                        <span style="color: #FF8000">if</span> ( <span style="color: #FFFFFF">sub_kf</span>, <span style="color: #FFFFFF">sub_jf</span> ) <span style="color: #FF8000">in</span> <span style="color: #FFFFFF">swap</span> :
                            <span style="color: #FF8000">return</span> <span style="color: #DD0000"># Break all loops</span>
                <span style="color: #FF8000">return</span> <span style="color: #FFFFFF">succ</span><span style="color: #FF8000">.</span><span style="color: #FFFFFF">append</span>( <span style="color: #FF69B4">tuple</span>( <span style="color: #FFFFFF">state_jf</span> ) )
            <span style="color: #FF8000">for</span> <span style="color: #FFFFFF">sub_kf</span> <span style="color: #FF8000">in</span> <span style="color: #FFFFFF">acts</span>[ <span style="color: #FFFFFF">j</span> ] : 
                <span style="color: #DD0000"># (2) Robots cannot collide</span>
                <span style="color: #FF8000">if</span> <span style="color: #FFFFFF">sub_kf</span> <span style="color: #FF8000">not</span> <span style="color: #FF8000">in</span> <span style="color: #FFFFFF">state_jf</span> :
                    <span style="color: #FFFFFF">combine</span>( <span style="color: #FFFFFF">acts</span>, <span style="color: #FFFFFF">j</span> <span style="color: #FF8000">+</span> <span style="color: #FF00FF">1</span>, <span style="color: #FFFFFF">state_jf</span> <span style="color: #FF8000">+</span> [ <span style="color: #FFFFFF">sub_kf</span> ] )
        <span style="color: #FFFFFF">combine</span>( <span style="color: #FFFFFF">acts</span> )
        <span style="color: #FF8000">return</span> <span style="color: #FF69B4">set</span>( <span style="color: #FFFFFF">succ</span> )

    <span style="color: #FF8000">def</span> <span style="color: #5E5EFF">goal_test</span>( <span style="color: #FFFFFF">state</span> ) :
        <span style="color: #02FF02">&#39;&#39;&#39; True if the state is a goal. &#39;&#39;&#39;</span>
        <span style="color: #FF8000">return</span> <span style="color: #FFFFFF">state</span> <span style="color: #FF8000">==</span> <span style="color: #FF69B4">self</span><span style="color: #FF8000">.</span><span style="color: #FFFFFF">goal</span>
</pre></div>
</td></tr></table>
    </div>
    <h1 style="color:#02FF02">Node</h1>
    <p style="text-align:justify; max-width:580px;">
      Formalizing the problem
    </p>
    <div style="width:610px; height:300px; overflow:auto; font-family:courier">
 <table class="table"><tr><td><div class="linenodiv" style="background-color: #454545; padding-right: 10px"><pre style="line-height: 125%"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div style="background: #002240"><pre style="line-height: 125%"><span></span><span style="color: #FF8000">class</span> <span style="color: #5E5EFF">Node</span> :
    <span style="color: #FF8000">def</span> <span style="color: #5E5EFF">__init__</span>( <span style="color: #FF69B4">self</span>, <span style="color: #FFFFFF">state</span>, <span style="color: #FFFFFF">parent</span> <span style="color: #FF8000">=</span> <span style="color: #FF69B4">None</span>, 
                  <span style="color: #FFFFFF">action</span> <span style="color: #FF8000">=</span> <span style="color: #FF69B4">None</span>, <span style="color: #FFFFFF">pathcost</span> <span style="color: #FF8000">=</span> <span style="color: #FF00FF">0</span> ):
        <span style="color: #02FF02">&#39;&#39;&#39; Create a search tree Node &#39;&#39;&#39;</span>
        <span style="color: #FF69B4">self</span><span style="color: #FF8000">.</span><span style="color: #FFFFFF">state</span>    <span style="color: #FF8000">=</span> <span style="color: #FFFFFF">state</span>
        <span style="color: #FF69B4">self</span><span style="color: #FF8000">.</span><span style="color: #FFFFFF">parent</span>   <span style="color: #FF8000">=</span> <span style="color: #FFFFFF">parent</span>
        <span style="color: #FF69B4">self</span><span style="color: #FF8000">.</span><span style="color: #FFFFFF">action</span>   <span style="color: #FF8000">=</span> <span style="color: #FFFFFF">action</span>
        <span style="color: #FF69B4">self</span><span style="color: #FF8000">.</span><span style="color: #FFFFFF">pathcost</span> <span style="color: #FF8000">=</span> <span style="color: #FFFFFF">pathcost</span>

    <span style="color: #FF8000">def</span> <span style="color: #5E5EFF">reverse</span>( <span style="color: #FF69B4">self</span>, <span style="color: #FFFFFF">l</span> ) :
        <span style="color: #FF8000">return</span> <span style="color: #FFFFFF">path</span>[ ::<span style="color: #FF8000">-</span><span style="color: #FF00FF">1</span> ]

    <span style="color: #FF8000">def</span> <span style="color: #5E5EFF">solution</span>( <span style="color: #FF69B4">self</span>, <span style="color: #FFFFFF">child</span>, <span style="color: #FFFFFF">initial</span> ):
        <span style="color: #02FF02">&#39;&#39;&#39; Returns list of chosen states &#39;&#39;&#39;</span>
        <span style="color: #FFFFFF">path</span> <span style="color: #FF8000">=</span> [ <span style="color: #FFFFFF">child</span><span style="color: #FF8000">.</span><span style="color: #FFFFFF">state</span> ]
        <span style="color: #FF8000">while</span> <span style="color: #FFFFFF">initial</span> <span style="color: #FF8000">not</span> <span style="color: #FF8000">in</span> <span style="color: #FFFFFF">path</span>:
            <span style="color: #FFFFFF">parent</span> <span style="color: #FF8000">=</span> <span style="color: #FFFFFF">child</span><span style="color: #FF8000">.</span><span style="color: #FFFFFF">parent</span>
            <span style="color: #FFFFFF">path</span><span style="color: #FF8000">.</span><span style="color: #FFFFFF">append</span>( <span style="color: #FFFFFF">parent</span><span style="color: #FF8000">.</span><span style="color: #FFFFFF">state</span> )
            <span style="color: #FFFFFF">child</span>  <span style="color: #FF8000">=</span> <span style="color: #FFFFFF">parent</span>
        <span style="color: #FF8000">return</span> <span style="color: #FF69B4">self</span><span style="color: #FF8000">.</span><span style="color: #FFFFFF">reverse</span>( <span style="color: #FFFFFF">path</span> )
</pre></div>
</td></tr></table>
    </div>
  </body>
</html>
